<!DOCTYPE html>
<html><head><script src="/chris_beeley_blog/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=chris_beeley_blog/livereload" data-no-instant defer></script>

  <title>Failure to produce pdf with RMarkdown tidyverse | Chris Beeley&#39;s blog</title>


  
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="">
  <link rel="icon" href="../../favicon.ico">



  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">

  <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>

  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>




  </head>
<body><nav class="navbar navbar-expand-lg navbar-light ">

  <a class="navbar-brand" href="../../">Chris Beeley&#39;s blog</a>

  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">

    <span class="navbar-toggler-icon"></span>

  </button>



  <div class="collapse navbar-collapse" id="navbarSupportedContent">

    <ul class="navbar-nav ml-auto">

      

      

        <li class="navbar-item ">

          <a class="nav-link" href="../../chris_beeley_blog/posts/" title="posts">posts</a>

        </li>

      

        <li class="navbar-item ">

          <a class="nav-link" href="https://github.com/ChrisBeeley/chris_beeley_blog" title="GitHub">github</a>

        </li>

      

    </ul>

  </div>

</nav>
  <h1>Failure to produce pdf with RMarkdown tidyverse</h1>

  
  
  <time datetime="2017-12-20T15:21:32&#43;00:00">December 20, 2017</time>

  <p>I’m using tidyverse for everything now, as I’ve mentioned in previous posts, when I want a cup of tea I just run:</p>
<pre tabindex="0"><code>&lt;pre class=&#34;brush: r; title: ; notranslate&#34; title=&#34;&#34;&gt;

house %&gt;%
  filter(kitchen == 1) %&gt;%
  select(tea, kettle) %&gt;%
  infuse()
</code></pre><p>I just ran <a href="https://gist.github.com/ChrisBeeley/867ffe93f541797e48f3ad195a75efb9">code</a>(in a gist because the markup makes Hugo go strange) in a vanilla RStudio setup with pdflatex installed</p>
<p>This is the code that you get if you set up an RMarkdown project in RStudio and select “compile to LaTeX”, and you want to do some data stuff with the tidyverse package.</p>
<p>And it produced the following error message:</p>
<p>! Package inputenc Error: Unicode char √ (U+221A)<br>
(inputenc) not set up for use with LaTeX.</p>
<p>See the inputenc package documentation for explanation.<br>
Type H <!-- raw HTML omitted --> for immediate help.<br>
… <!-- raw HTML omitted --></p>
<p>l.145 \end{verbatim}</p>
<p>Try running pandoc with –latex-engine=xelatex.<br>
pandoc: Error producing PDF<br>
Error: pandoc document conversion failed with error 43<br>
Execution halted</p>
<p>I was a bit confused by this for quite a while, the answer of course turns out to be the lovely messages which the tidyverse produces on loading:</p>
<p><img src="https://lh3.googleusercontent.com/-Cn0ZuIwP3zs/Wjp1shrKdeI/AAAAAAAAL7Y/rcFYBh2GvA8sw8jgcUcwheZ0aertVHX4gCHMYCw/d/Screenshot_.jpg" alt=""></p>
<p>With the default message = TRUE behaviour in the code chunk pandoc ends up trying to render those little ticks in LaTeX. Evidently it doesn’t support unicode.</p>
<p>So the document fails, and it’s hard to understand why until you knit to HTML and see the little ticks.</p>
<p>Changing the knitr::opts_chunk$set(echo = TRUE) line to knitr::opts_chunk$set(echo = TRUE, message = FALSE) fixes the problem.</p>
<p>I can’t help but think that this is a rare example of R getting harder to use. When I started with R 10 years ago it was much more difficult to do even simple things like load a csv file or work with dates. These days there are lots of lovely packages to help, and of course RStudio itself makes using R much more intuitive. But this is going to confuse newbies, I think, which is a bit of a shame.</p>
<p>There are several obvious fixes, I won’t bother to list them all, maybe make message = FALSE the default in RMarkdown documents in RStudio seems like the best one, but maybe there’s some reason they don’t want to do that.</p>

  

<footer class="footer mt-5">

  <div class="container">

    <table class="table table-sm">

      <caption>Hugo Variables for current page</caption>

      <tr><th>Name</th><td>Failure to produce pdf with RMarkdown tidyverse</td></tr>

      <tr><th>Kind</th><td>page</td></tr>

      <tr><th>Type</th><td>posts</td></tr>

      <tr><th>List Page</th><td>.Pages</td></tr>

      <tr><th>IsPage</th><td>true</td></tr>

      <tr><th>IsHome</th><td>true</td></tr>

      <tr><th>Next</th><td>/Users/NatsSpace/chris_beeley_blog_update/content/posts/2018-01-22-gathering-data-wide-to-long-in-the-tidyverse.md</td></tr>

      <tr><th>Prev</th><td>/Users/NatsSpace/chris_beeley_blog_update/content/posts/2017-12-08-font-size-of-code-in-rpres-presentations.md</td></tr>

      <tr><th>Section</th><td>/Users/NatsSpace/chris_beeley_blog_update/content/posts/_index.md</td></tr>

    </table>

  </div>

</footer></body>
</html>
