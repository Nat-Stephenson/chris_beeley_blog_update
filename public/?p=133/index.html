<!DOCTYPE html>
<html><head><script src="/chris_beeley_blog/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=chris_beeley_blog/livereload" data-no-instant defer></script>

  <title>Simulating data | Chris Beeley&#39;s blog</title>


  
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="">
  <link rel="icon" href="../favicon.ico">



  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">

  <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>

  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>




  </head>
<body><nav class="navbar navbar-expand-lg navbar-light ">

  <a class="navbar-brand" href="../">Chris Beeley&#39;s blog</a>

  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">

    <span class="navbar-toggler-icon"></span>

  </button>



  <div class="collapse navbar-collapse" id="navbarSupportedContent">

    <ul class="navbar-nav ml-auto">

      

      

        <li class="navbar-item ">

          <a class="nav-link" href="../chris_beeley_blog/posts/" title="posts">posts</a>

        </li>

      

        <li class="navbar-item ">

          <a class="nav-link" href="https://github.com/ChrisBeeley/chris_beeley_blog" title="GitHub">github</a>

        </li>

      

    </ul>

  </div>

</nav>
  <h1>Simulating data</h1>

  
  
  <time datetime="2011-10-03T06:22:03&#43;00:00">October 3, 2011</time>

  <p>I try to publish as much of my work as I can on the internet, where the people who own the data agree (my little bit of the website is <a href="http://www.institutemh.org.uk/-about-us-/our-evaluation-service">here</a>) but very often I can’t publish the data because of issues with ongoing projects, other publications, various levels of confidentiality of data, and so on.</p>
<p>So I’ve decided to try to simulate the data whenever there is an issue with publication. It’s very easy and it’s an excellent way for me to be able to show people my work without any of the issues that come from showing real data. The code is below, it comes in two parts for the first set of variables because we fiddled with the questionnaire a bit after Time 8 in the dataset.</p>
<pre tabindex="0"><code>&lt;pre class=&#34;brush: r; title: ; notranslate&#34; title=&#34;&#34;&gt;

mydatafirst[mydatafirst$Time&gt;8,
  which(names(mydatafirst)==&#34;Service&#34;) : which(names(mydatafirst)==&#34;Therapist&#34;)] = 
    apply(mydatafirst[mydatafirst$Time&gt;8, which(names(mydatafirst)==&#34;Service&#34;) : which(names(mydatafirst)==&#34;Therapist&#34;)],
      2, function (x) sample(x[!is.na(x)], length(mydatafirst$Service[mydatafirst$Time&gt;8]), replace=TRUE))

mydatafirst[mydatafirst$Time&lt;9,
  which(names(mydatafirst)==&#34;Service&#34;):which(names(mydatafirst)==&#34;Therapist&#34;)] = 
    apply(mydatafirst[mydatafirst$Time&lt;9,which(names(mydatafirst)==&#34;Service&#34;) : 
      which(names(mydatafirst)==&#34;Therapist&#34;)],
      2, function (x) sample(x[!is.na(x)], length(mydatafirst$Service[mydatafirst$Time&lt;9]), replace=TRUE))

mydatafirst[c(which(names(mydatafirst)==&#34;Imp1&#34;), which(names(mydatafirst)==&#34;Best1&#34;))] =
  apply(mydatafirst[c(which(names(mydatafirst)==&#34;Imp1&#34;), which(names(mydatafirst)==&#34;Best1&#34;))], 2, function (x)
    sample(x[!is.na(x)], length(mydatafirst$Imp1), replace=TRUE))
</code></pre><p>Thanks to the magic of R, and in particular the Sweave and Brew packages, all I need to do is insert these four lines into the code, re-run the report, and I have a nicely simulated dataset. I must confess I didn’t use R to convert the comments to gibberish, it was easier to download them from <a href="www.random.org">here</a>, but if this website didn’t exist then I certainly could have used R to do this very easily.</p>
<p>Something else that R and Sweave are really helping me with at the moment is making it possible to start to analyse data and compile reports before the data comes in. Because Sweave will automatically put together the statistics and graphs for me as I go along, it frees me up to just work on the data, share the progress with people as it comes along, and then put together the final analysis when all the data is collected, without having to manually re-write all the statistics and copy and paste all the graphs all the way through. I’ll post about the usefulness of Sweave and how it helps with workflow another time.</p>

  
  <div>
    <div>Tags:</div>
    <ul>
        <li><a href="../chris_beeley_blog/tags/patient-survey/">Patient Survey</a></li>
        <li><a href="../chris_beeley_blog/tags/r/">R</a></li>
        <li><a href="../chris_beeley_blog/tags/simulation/">Simulation</a></li>
        <li><a href="../chris_beeley_blog/tags/sweave/">Sweave</a></li>
    </ul>
  </div>

<footer class="footer mt-5">

  <div class="container">

    <table class="table table-sm">

      <caption>Hugo Variables for current page</caption>

      <tr><th>Name</th><td>Simulating data</td></tr>

      <tr><th>Kind</th><td>page</td></tr>

      <tr><th>Type</th><td>posts</td></tr>

      <tr><th>List Page</th><td>.Pages</td></tr>

      <tr><th>IsPage</th><td>true</td></tr>

      <tr><th>IsHome</th><td>true</td></tr>

      <tr><th>Next</th><td>/Users/NatsSpace/chris_beeley_blog_update/content/posts/2011-11-16-quick-presentations.md</td></tr>

      <tr><th>Prev</th><td>/Users/NatsSpace/chris_beeley_blog_update/content/posts/2011-09-12-robin-hood-marathon-results.md</td></tr>

      <tr><th>Section</th><td>/Users/NatsSpace/chris_beeley_blog_update/content/posts/_index.md</td></tr>

    </table>

  </div>

</footer></body>
</html>
