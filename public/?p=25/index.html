<!DOCTYPE html>
<html><head><script src="/chris_beeley_blog/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=chris_beeley_blog/livereload" data-no-instant defer></script>

  <title>Fun with wordclouds | Chris Beeley&#39;s blog</title>


  
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="">
  <link rel="icon" href="../favicon.ico">



  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">

  <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>

  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>




  </head>
<body><nav class="navbar navbar-expand-lg navbar-light ">

  <a class="navbar-brand" href="../">Chris Beeley&#39;s blog</a>

  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">

    <span class="navbar-toggler-icon"></span>

  </button>



  <div class="collapse navbar-collapse" id="navbarSupportedContent">

    <ul class="navbar-nav ml-auto">

      

      

        <li class="navbar-item ">

          <a class="nav-link" href="../chris_beeley_blog/posts/" title="posts">posts</a>

        </li>

      

        <li class="navbar-item ">

          <a class="nav-link" href="https://github.com/ChrisBeeley/chris_beeley_blog" title="GitHub">github</a>

        </li>

      

    </ul>

  </div>

</nav>
  <h1>Fun with wordclouds</h1>

  
  
  <time datetime="2011-08-02T15:59:52&#43;00:00">August 2, 2011</time>

  <p>As always, I’m late to this party, and wordclouds have come under fire in recent times, e.g. here: <a href="http://www.drewconway.com/zia/?p=2624">drewconway.com</a>. From my point of view they’re eye-catching, and I hope that by putting them up on a website or in a report they might cause people to linger and look in more detail at other pieces of data and visualisation. That’s all I’m going to say for now, I’m sure I’ll talk again about what’s attractive to data scientists and statisticians and what’s attractive to the general public, but let’s leave it for now.</p>
<p>I am looking at interesting ways of looking at the patient survey (see previous post) at the moment and I thought I would have a go at a wordcloud. Thanks to the wonderful people producing packages for R (the tm and wordcloud packages, many thanks to both!), it’s easy. I nicked a bit of code from another blog (thanks <a href="http://onertipaday.blogspot.com/2011/07/word-cloud-in-r.html">One R tip a day</a>!) and pretty soon I had my own. It’s from two areas of the Trust, featuring the things people like about our services.</p>
<p>Here’s the code:</p>
<pre tabindex="0"><code>&lt;pre class=&#34;brush: r; title: ; notranslate&#34; title=&#34;&#34;&gt;

mydata=subset(mydatafirst, Var1==0) # slice the data by area

mycorpus=Corpus(DataframeSource(data.frame(mydata[-is.na(mydata$Best),34]))) # make a text corpus for the tm package out of a data frame, removing missing values at the same time

mycorpus &amp;lt;- tm_map(mycorpus, removePunctuation) # remove all the puncuation
mycorpus &amp;lt;- tm_map(mycorpus, tolower) # make everything lower case
mycorpus &amp;lt;- tm_map(mycorpus, function(x) removeWords(x, c(stopwords(&amp;quot;english&amp;quot;), &amp;quot;none&amp;quot;, &amp;quot;ive&amp;quot;, &amp;quot;dont&amp;quot;, &amp;quot;etc&amp;quot;))) # remove words without meaning, many of which are provided by the stopwords(&amp;quot;english&amp;quot;) function

# these next steps take the corpus and turn it into a dataframe ready for the wordcloud function

tdm &amp;lt;- TermDocumentMatrix(mycorpus)
m &amp;lt;- as.matrix(tdm)
v &amp;lt;- sort(rowSums(m),decreasing=TRUE)
d &amp;lt;- data.frame(word = names(v),freq=v)

par(mfrow=c(1,2))

wordcloud(d$word,d$freq,c(3.5,.5),2,100,TRUE,.15, terrain.colors(5),vfont=c(&amp;quot;sans serif&amp;quot;,&amp;quot;plain&amp;quot;))

# ...same steps again for the other area

wordcloud(d2$word,d2$freq,scale=c(4,.5),2,100,TRUE,.15, terrain.colors(5),vfont=c(&amp;quot;sans serif&amp;quot;,&amp;quot;plain&amp;quot;))
</code></pre><p>I adjusted by eye the scale which you can see in the 3rd parameter of the wordcloud function (making the second area a bit larger). There’s probably a better way, I will investigate further as I look more at what to do with all this data.</p>
<p>Here’s the word cloud:</p>
<p><a href="http://chrisbeeley.net/wp-content/uploads/2011/08/rplot02.pdf">Rplot02</a></p>
<p>Not bad for a few hours’ work! I’m hoping it will draw people in to look at more of the reporting that we do at any rate. Let me know what you think of it, and word clouds generally, in the comments.</p>

  
  <div>
    <div>Tags:</div>
    <ul>
        <li><a href="../chris_beeley_blog/tags/data-visualisation/">Data Visualisation</a></li>
        <li><a href="../chris_beeley_blog/tags/patient-survey/">Patient Survey</a></li>
        <li><a href="../chris_beeley_blog/tags/text-mining/">Text Mining</a></li>
        <li><a href="../chris_beeley_blog/tags/word-clouds/">Word Clouds</a></li>
    </ul>
  </div>

<footer class="footer mt-5">

  <div class="container">

    <table class="table table-sm">

      <caption>Hugo Variables for current page</caption>

      <tr><th>Name</th><td>Fun with wordclouds</td></tr>

      <tr><th>Kind</th><td>page</td></tr>

      <tr><th>Type</th><td>posts</td></tr>

      <tr><th>List Page</th><td>.Pages</td></tr>

      <tr><th>IsPage</th><td>true</td></tr>

      <tr><th>IsHome</th><td>true</td></tr>

      <tr><th>Next</th><td>/Users/NatsSpace/chris_beeley_blog_update/content/posts/2011-08-03-new-book-the-visual-display-of-quantitative-information.md</td></tr>

      <tr><th>Prev</th><td>/Users/NatsSpace/chris_beeley_blog_update/content/posts/2011-08-01-the-patient-survey-past-present-and-future.md</td></tr>

      <tr><th>Section</th><td>/Users/NatsSpace/chris_beeley_blog_update/content/posts/_index.md</td></tr>

    </table>

  </div>

</footer></body>
</html>
